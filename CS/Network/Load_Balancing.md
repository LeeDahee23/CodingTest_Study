# 로드 밸런싱

## 로드 밸런싱(Load Balancing)

- 애플리케이션을 지원하는 리소스 풀 전체에 `네트워크 트래픽을 균등하게 배포`
- 서버가 처리해야 할 요청을 여러 대의 서버(리소스 서버)로 나누어 처리하는 것.
- 로드 밸런서: 사용자와 서버 그룹 사이에 위치하여, 모든 리소스 서버가 동일하게 사용 되도록 하는 디바이스

**why?** 

최신 애플리케이션은 수백만 명의 사용자를 동시에 처리하고 정확한 텍스트, 비디오, 이미지 및 기타 데이터를 빠르고 안정적인 방식으로 각 사용자에게 반환해야 함. ex) 유튜브, 인스타그램

이렇게 많은 양의 트래픽을 처리하기 위해서는 두 가지 방법이 있음.

1. Scale up: 기존의 서버 성능을 확장
2. Scale out: 기존의 서버와 동일하거나 낮은 성능의 `서버를 증설` 
⇒ 한 대의 서버로 부하가 집중되지 않도록 트래픽을 `여러 대의 서버로 분산` 필요!

## 로드 밸런싱 알고리즘

### 정적 로드 밸런싱: 고정된 규칙을 따르며 현재 서버 상태와 무관

1. **라운드 로빈 방식**: 서버에 들어온 요청을 `순서대로` 돌아가며 배정. 모든 서버의 스펙이 동일하거나 비슷함.
2. **가중 기반 라운드 로빈 방식**: 우선순위 또는 용량에 따라 각 서버에 서로 다른 가중치를 할당하고, `가중치가 높은 서버에` 클라이언트 요청을 우선적으로 배분.
3. **IP 해시 방식**: 로드 밸런서가 클라이언트 `IP 주소에 대해 해싱 해서 숫자로 변환`한 다음 개별 서버에 매핑.

### 동적 로드 밸런싱: 트래픽을 배포하기 전에 서버의 현재 상태를 검사함.

1. **최소 연결 방법**: 로드 밸런서가 `활성 연결이 가장 적은 서버에` 트래픽을 전송. 자주 세션이 길어지거나, 서버에 분배된 트래픽들이 일정하지 않은 경우에 적합.
2. **가중치 기반 최소 연결 방법**: 각 서버에 다른 가중치 또는 용량을 할당할 수 있음. 로드밸런서가 `용량별 연결이 가장 적은 서버로` 요청을 전송.
3. **최소 응답 시간 방법**: 응답 시간이란 서버가 들어오는 요청을 처리하고 응답을 전송하는 데 걸리는 총 시간임. `서버 응답 시간이 가장 짧고 활성 연결이 가장 적은` 최상의 서버에 요청을 전송.

## 참고 자료

[AWS - 로드 밸런싱이란 무엇인가요?](https://aws.amazon.com/ko/what-is/load-balancing/)

[Tecoble - 로드 밸런싱에 대해 알아보자!](https://tecoble.techcourse.co.kr/post/2021-11-07-load-balancing/)
