# 프로세스(Process)

### 프로그램(Program)

- 어떤 작업을 하기 위해 실행될 수 있는 파일
- 파일이 저장장치에 있지만 메모리에는 올라가 있지 않은 정적인 상태

### 프로세스(Process)

- 컴퓨터에서 연속적으로 실행되고 있는 컴퓨터 프로그램 == 프로그램을 실행한 것
- 메모리에 적재되고 CPU 자원을 할당받아 `프로그램이 실행되고 있는 상태`
    - 메모리에 올라와 실행되고 있는 프로그램의 인스턴스(독립적인 개체)
    - ex) 웹 브라우저 - 탭
- 스케줄링의 대상이 되는 작업(task) 이라는 용어와 거의 같은 의미로 쓰임.
    - 작업관리자
        
        ![image](https://github.com/LeeDahee23/Study/assets/82389864/c61b3da2-b529-44df-8522-25de1ac50261)

      
        출처: [https://inpa.tistory.com/entry/👩‍💻-프로세스-⚔️-쓰레드-차이#한눈에_이해하는_프로세스__스레드_개념](https://inpa.tistory.com/entry/%F0%9F%91%A9%E2%80%8D%F0%9F%92%BB-%ED%94%84%EB%A1%9C%EC%84%B8%EC%8A%A4-%E2%9A%94%EF%B8%8F-%EC%93%B0%EB%A0%88%EB%93%9C-%EC%B0%A8%EC%9D%B4#%ED%95%9C%EB%88%88%EC%97%90_%EC%9D%B4%ED%95%B4%ED%95%98%EB%8A%94_%ED%94%84%EB%A1%9C%EC%84%B8%EC%8A%A4__%EC%8A%A4%EB%A0%88%EB%93%9C_%EA%B0%9C%EB%85%90)
        

# 스레드

- `프로세스 내`에서 동시에 진행되는 흐름의 단위
- 하나의 프로세스 안에서 여러 작업들 흐름이 동시에 진행 가능 ⇒ 멀티 스레드
    - ex) 크롬 브라우저에서 ①파일 다운로드 받으면서 ②검색 하면서 ③게임 하기도 함. 
    이런 작업 흐름이 스레드
- 프로세스가 할당받은 자원을 이용하는 실행의 단위
- 기본적으로 프로세스당 최소 1개의 스레드(메인 스레드)를 가지고 있다.

      
# 프로세스의 자원 구조

![image](https://github.com/LeeDahee23/Study/assets/82389864/f09d4b3e-f2d7-43ce-8868-c9642c133e42)
   
출처: [https://inpa.tistory.com/entry/👩‍💻-프로세스-⚔️-쓰레드-차이#한눈에_이해하는_프로세스__스레드_개념](https://inpa.tistory.com/entry/%F0%9F%91%A9%E2%80%8D%F0%9F%92%BB-%ED%94%84%EB%A1%9C%EC%84%B8%EC%8A%A4-%E2%9A%94%EF%B8%8F-%EC%93%B0%EB%A0%88%EB%93%9C-%EC%B0%A8%EC%9D%B4#%ED%95%9C%EB%88%88%EC%97%90_%EC%9D%B4%ED%95%B4%ED%95%98%EB%8A%94_%ED%94%84%EB%A1%9C%EC%84%B8%EC%8A%A4__%EC%8A%A4%EB%A0%88%EB%93%9C_%EA%B0%9C%EB%85%90)

- 코드영역(Code, Text): 코드가 CPU가 해석 가능한 기계어 형태로 저장
- 데이터 영역(Data): 전역 변수, 각종 데이터
- 스택 영역(Stack): 호출한 함수가 종료되면 되돌아올 `임시적인 자료를 저장`하는 독립적 공간(동적 영역)
- 힙 영역(Heap): 동적 할당 데이터를 위한 공간. 메모리 공간이 동적으로 할당/해제(동적 영역)

### 스레드의 자원공유

<img src="https://gmlwjd9405.github.io/images/os-process-and-thread/thread.png" />  
출처: https://gmlwjd9405.github.io/2018/09/14/process-vs-thread.html

<br/>
<br/>

- 스레드끼리 프로세스의 자원을 공유함.
- 스레드는 프로세스 내에서 각각 stack만 따로 할당 받고 code, data, heap 영역을 공유함.
- 각각의 스레드는 별도의 레지스터와 스택을 갖고 있지만, 힙 메모리는 서로 읽고 쓸 수 있다.
    - 독립적인 스택을 가졌다 → 독립적인 함수 호출이 가능하다. → 독립적인 실행 흐름이 추가된다
    ⇒ 스택을 가짐으로서 스레드는 독립적인 실행 흐름을 가질 수 있게 되는 것
- 한 스레드가 프로세스 자원을 변경하면, 다른 이웃 스레드도 그 변경 결과를 즉시 볼 수 있다.
- 프로세스 간의 전환 속도보다 스레드 간의 전환 속도가 빠르다.

### 프로세스의 자원 공유

- 각 프로세스는 메모리의 별도의 주소 공간에서 실행 되기 때문에, 한 프로세스는 다른 프로세스의 변수나 자료구조에 접근할 수 `없다`.
- 다른 프로세스의 자원에 접근하려면 프로세스 간의 통신을 사용해야 함.
    - IPC, Inter-Process Communication
    - LPC(Local inter-Process Communication)
    - 별도의 공유 메모리를 만들어서 정보를 주고 받도록 설정
- But, 프로세스 자원 공유는 단순히 CPU 레지스터 교체뿐만 아니라 RAM과 CPU 사이의 캐시 메모리까지 초기화되기 때문에 지원 부담이 큼
    - 다중 작업이 필요한 경우 스레드를 이용하는 것이 훨씬 효율적

# 멀티프로세스 vs 멀티스레드

### 멀티 프로세스(Multi Process)

- 하나의 프로그램에서 여러 개의 프로세스를 실행하는 것
- 보통 하나의 프로그램 실행에 대해 하나의 프로세스가 메모리에 생성되지만, 부가적인 기능을 위해 여러 개의 프로세스를 생성하는 것
- 서로 다른 프로세스는 독립적으로 실행, 독립적인 메모리 공간을 가지고 있어 서로 다른 작업을 수행함
    - ex) 웹 브라우저 탭 - 같은 브라우저 프로그램 실행이지만, 각기 다른 사이트 실행을 함.
- 참고 - 멀티프로세싱(Multi-Processing)
    - 컴퓨터 시스템 한 대에 둘 이상의 프로세서(CPU)를 이용하여 병렬로 처리하는 것
- 장점
    - `프로그램 안전성`: 한 프로세스가 비정상적으로 종료 되어도 다른 프로세스에 영향을 주지 않음 ⇒ 프로그램 전체의 안전성 확보
    - `프로그램 병렬성`
    - `시스템 확장성`: 프로세스가 독립적이기 때문에 새로운 기능이나 모듈을 추가하거나 수정할 때 다른 프로세스에 영향을 주지 않음. 시스템 규모를 쉽게 확장할 수 있음.
        - 로드 밸런싱 - 하나의 성능 좋은 컴퓨터에 여러 개의 서버 프로세스를 두는 것
- 단점
    - Context Switching Overhead: 컨택스트 스위칭 과정에서의 성능 저하
    프로세스를 컨텍스트 스위칭하면 CPU는 다음 프로세스의 정보를 불러오기 위해 메모리 검색, CPU 캐시 메모리 초기화, 프로세스 상태 저장, 데이터 준비를 해야 함.
    - 자원 공유 비효율성: 각 프로세스가 독립적인 메모리 공간을 가지므로, 결과적으로 메모리 사용량이 증가

### 멀티 스레드(Multi Thread)

- 하나의 프로세스 안에 여러 개의 스레드가 있는 것
- 하나의 프로그램에서 두 가지 이상의 동작을 동시에 처리하도록 하는 행위가 가능
    - ex) 웹 브라우저의 단일 탭 혹은 창 내에서 브라우저 이벤트 루프, 네트워크 처리, I/O 및 기타 작업을 관리, 처리
- 장점
    - 스레드는 프로세스보다 가벼움: 용량 가벼움, 스레드 실행 환경 설정 작업 간단, 데이터 용량 작음(자원 공유)
    - 자원의 효율성: heap 영역과 같은 공유 메모리에 대해 자원 공유 가능
    - context switching 비용 감소: 스레드에도 컨텍스트 스위칭 오버헤드가 존재, but 낮음
    공유 자원을 제외한 스레드 정보(스택, 레지스터)만 교체
    - 응답 시간 단축: 컨텍스트 스위칭 오버헤드 작음, 용량 작음 → 멀티프로세스보다 응답 시간 빠름
- 단점
    - 안정성 문제: 기본적으로 하나의 스레드에서 문제가 발생하면 다른 스레드들도 영향을 받아 전체 프로그램이 종료, 프로그래머가 해결 가능 → 비용 발생(새로운 스레드 생성, 노는 스레드 처리)
    - 동기화로 인한 성능 저하: 여러 스레드가 동시에 한 자원을 변경해 버린다면 버그 발생 → 스레드 간 동기화는 필수적, 여러 스레드 접근을 제한하는것 → 병목 현상
    - 데드락: 다수의 프로세스나 스레드가 서로 자원을 점유하고, 다른 프로세스나 스레드가 점유한 자원을 기다리는 상황에서 발생하는 교착 상태, 멀티 프로세스와 스레드 공통적 문제점

# 참고 자료

[[OS] 프로세스와 스레드의 차이](https://gmlwjd9405.github.io/2018/09/14/process-vs-thread.html)

[위키피디아 - 프로세스](https://ko.wikipedia.org/wiki/%ED%94%84%EB%A1%9C%EC%84%B8%EC%8A%A4)

[위키피디아 - 스레드](https://ko.wikipedia.org/wiki/%EC%8A%A4%EB%A0%88%EB%93%9C_(%EC%BB%B4%ED%93%A8%ED%8C%85))

[👩‍💻 멀티 프로세스 vs 멀티 스레드 비교 💯 완전 총정리](https://inpa.tistory.com/entry/%F0%9F%91%A9%E2%80%8D%F0%9F%92%BB-multi-process-multi-thread#multi_process)

[👩‍💻 ‍완전히 정복하는 프로세스 vs 스레드 개념](https://inpa.tistory.com/entry/%F0%9F%91%A9%E2%80%8D%F0%9F%92%BB-%ED%94%84%EB%A1%9C%EC%84%B8%EC%8A%A4-%E2%9A%94%EF%B8%8F-%EC%93%B0%EB%A0%88%EB%93%9C-%EC%B0%A8%EC%9D%B4#%ED%95%9C%EB%88%88%EC%97%90_%EC%9D%B4%ED%95%B4%ED%95%98%EB%8A%94_%ED%94%84%EB%A1%9C%EC%84%B8%EC%8A%A4__%EC%8A%A4%EB%A0%88%EB%93%9C_%EA%B0%9C%EB%85%90)
